<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<script th:src="@{/webjars/jquery/2.1.4/jquery.min.js}"></script>
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript">
		google.load("visualization", "1", {packages:["geochart"]});
		google.setOnLoadCallback(drawGeolocationChart);

		function drawGeolocationChart() {
			$.ajax("/manage/metrics/counter.country.*").done(function(json) {
				var arr = [];
				arr.push(["Country", "Hits"]);
				for (var name in json)
					arr.push([name.substr(16), json[name]]);
				var data = google.visualization.arrayToDataTable(arr);
				var options = {
					colorAxis: {colors: ["white", "red"]}
				};
				var chart = new google.visualization.GeoChart(document.getElementById("geolocationChart"));
				chart.draw(data, options);
			});
		}
	</script>
</head>
<body>
	<div id="geolocationChart" style="width: 900px; height: 500px;"></div>
</body>
</html>
