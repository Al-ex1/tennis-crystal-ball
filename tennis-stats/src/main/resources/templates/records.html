<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="recordCount" type="java.lang.Integer"*/-->
<!--/*@thymesVar id="recordCategories" type="java.util.List<org.strangeforest.tcb.stats.model.records.RecordCategory>"*/-->
<!--/*@thymesVar id="infamousRecordCategories" type="java.util.List<org.strangeforest.tcb.stats.model.records.RecordCategory>"*/-->
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Ultimate Tennis Statistics - Records Book</title>
	<link th:href="@{|/webjars/bootstrap/${versions['bootstrap']}/css/bootstrap.min.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{|/webjars/jquery-ui-themes/${versions['jquery-ui']}/smoothness/jquery-ui.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{|/webjars/jquery-bootgrid/${versions['bootgrid']}/dist/jquery.bootgrid.min.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{/css/tennis-stats.css}" rel="stylesheet" media="screen"/>
	<script th:src="@{|/webjars/jquery/${versions['jquery']}/jquery.min.js|}"></script>
	<script th:src="@{|/webjars/jquery-ui/${versions['jquery-ui']}/jquery-ui.min.js|}"></script>
	<script th:src="@{|/webjars/bootstrap/${versions['bootstrap']}/js/bootstrap.min.js|}"></script>
	<script th:src="@{|/webjars/jquery-bootgrid/${versions['bootgrid']}/dist/jquery.bootgrid.min.js|}"></script>
	<script th:src="@{/js/tennis-stats.js}"></script>
	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		$(function() {
			$("#recordsTable").bootgrid({
				ajax: true,
				ajaxSettings: {
					method: "GET",
					cache: false
				},
				url: "/recordsTable",
				requestHandler: function (request) {
					var infamous = $("#infamous").prop("checked");
					request.category = !infamous ? $("#category").val() : $("#infamousCategory").val();
					request.infamous = infamous;
					return request;
				},
				sorting: false,
				rowCount: [20, 50, -1],
				formatters: {
					"record": function(column, row) {
						return "<a href='/record?recordId=" + row.id + "' title='Show Record'>" + row.name + "</a>";
					},
					"playerRecords": function(column, row) {
						var playerRecords = row.playerRecords;
						var len = playerRecords.length;
						var s = null;
						for (var i = 0; i < len; i++) {
							var playerRecord = playerRecords[i];
							s = s ? s + ", " : "";
							s += playerCountryFormatter(column, playerRecord) + " " + playerRecord.detail;
						}
						return s;
					}
				},
				templates: {
					paginationItem: bootgridTemplatePaginationItem
				}
			});
			showRecordCategories();
			var $recordsTableHeader = $("#recordsTable-header");
			$recordsTableHeader.find(".actionBar").css("padding-left", "0");
			$recordsTableHeader.find("div.search").before($("#categoryDiv").remove()).before($("#infamousDiv").remove());
			$("[data-toggle='tooltip']").tooltip();
		});
		/*]]>*/
	</script>
	<script type="text/javascript">
		/*<![CDATA[*/
		function showRecordCategories() {
			var infamous = $("#infamous").prop("checked");
			$("#categoryControl").css("display", infamous ? "none" : "");
			$("#infamousRecordControl").css("display", infamous ? "" : "none");
		}
		function infamousChanged() {
			showRecordCategories();
			reloadRecordsTable();
		}
		function reloadRecordsTable() {
			$("#recordsTable").bootgrid("reload");
		}
		/*]]>*/
	</script>
</head>
<body class="container">
	<header th:include="fragments/header :: title"></header>
	<div class="text-nowrap">
		<h3 style="float: left; margin-top: 5px">Records Book</h3>
		<h5 style="font-style: italic" th:text="'&nbsp;' + ${recordCount} + ' Different Records!'">&nbsp;100 Different Records</h5>
	</div>
	<div id="categoryDiv" class="col-sm-7" style="padding-left: 0">
		<div id="categoryControl" class="input-group" style="float: left">
			<label for="category" class="input-group-addon">Category:</label>
			<select id="category" class="form-control" onchange="reloadRecordsTable()" data-toggle="tooltip" data-placement="top" title="Select Record Category">
				<option value="">All Records</option>
				<option th:each="recordCategory : ${recordCategories}" th:value="${recordCategory.name}" value="Most Matches" th:text="${recordCategory.name}">Most Matches</option>
			</select>
		</div>
		<div id="infamousRecordControl" class="input-group" style="float: left; display: none">
			<label for="infamousCategory" class="input-group-addon">Infamous:</label>
			<select id="infamousCategory" class="form-control" onchange="reloadRecordsTable()" data-toggle="tooltip" data-placement="top" title="Select Infamous Record">
				<option value="">All Infamous Records</option>
				<option th:each="recordCategory : ${infamousRecordCategories}" th:value="${recordCategory.name}" value="Most Matches" th:text="${recordCategory.name}">Most Matches</option>
			</select>
		</div>
	</div>
	<div id="infamousDiv" class="col-sm-1">
		<div class="checkbox">
			<label data-toggle="tooltip" data-placement="top" title="Show famous or infamous records">
				<input id="infamous" type="checkbox" onchange="infamousChanged()"/> Infamous
			</label>
		</div>
	</div>
	<table id="recordsTable" class="table table-condensed table-hover table-striped">
		<thead>
		<tr>
			<th data-column-id="record" data-formatter="record" data-sortable="false" data-width="300">Record</th>
			<th data-column-id="playerRecords" data-formatter="playerRecords" data-sortable="false" data-width="500">Record Holder</th>
		</tr>
		</thead>
	</table>
	<footer th:include="fragments/footer :: copy"></footer>
</body>
</html>