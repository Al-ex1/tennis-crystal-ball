<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="infamous" type="java.lang.Boolean"*/-->
<!--/*@thymesVar id="record" type="org.strangeforest.tcb.stats.model.records.Record"*/-->
<!--/*@thymesVar id="active" type="java.lang.Boolean"*/-->
<!--/*@thymesVar id="recordCategories" type="java.util.List<org.strangeforest.tcb.stats.model.records.RecordCategory>"*/-->
<!--/*@thymesVar id="infamousRecordCategories" type="java.util.List<org.strangeforest.tcb.stats.model.records.RecordCategory>"*/-->
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title th:text="'Ultimate Tennis Statistics - ' + ${record != null ? record.name : 'Records'}">Ultimate Tennis Statistics - Records</title>
	<link th:href="@{|/webjars/bootstrap/${versions['bootstrap']}/css/bootstrap.min.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{|/webjars/jquery-ui-themes/${versions['jquery-ui']}/smoothness/jquery-ui.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{|/webjars/jquery-bootgrid/${versions['bootgrid']}/dist/jquery.bootgrid.min.css|}" rel="stylesheet" media="screen"/>
	<link th:href="@{/css/tennis-stats.css}" rel="stylesheet" media="screen"/>
	<script th:src="@{|/webjars/jquery/${versions['jquery']}/jquery.min.js|}"></script>
	<script th:src="@{|/webjars/jquery-ui/${versions['jquery-ui']}/jquery-ui.min.js|}"></script>
	<script th:src="@{|/webjars/bootstrap/${versions['bootstrap']}/js/bootstrap.min.js|}"></script>
	<script th:src="@{|/webjars/jquery-bootgrid/${versions['bootgrid']}/dist/jquery.bootgrid.min.js|}"></script>
	<script th:src="@{/js/tennis-stats.js}"></script>
	<script th:if="${record}" type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		$(function() {
			$("#recordTable").bootgrid({
				ajax: true,
				ajaxSettings: {
					method: "GET",
					cache: false
				},
				url: "/recordTable?recordId=" + [[${record.id}]],
				requestHandler: function (request) {
					request.active = isActiveChecked();
					return request;
				},
				sorting: false,
				rowCount: [20, 50, -1],
				formatters: {
					"country": countryFormatter,
					"player": playerFormatter,
					"tournament": tournamentFormatter
				},
				templates: {
					paginationItem: bootgridTemplatePaginationItem
				}
			});
			var $recordTableHeader = $("#recordTable-header");
			$recordTableHeader.find("div.search").remove();
			var $actionBar = $recordTableHeader.find("div.actionBar");
			$actionBar.removeClass("col-sm-12").addClass("col-sm-2");
			$actionBar.before($("#recordDiv").remove());
			$actionBar.before($("#infamousDiv").remove());
			$actionBar.before($("#activeDiv").remove());
		});
		/*]]>*/
	</script>
	<script type="text/javascript">
		/*<![CDATA[*/
		$(function() {
			$("[data-toggle='tooltip']").tooltip();
		});
		function isInfamousChecked() {
			return $("#infamous").prop("checked");
		}
		function isActiveChecked() {
			return $("#active").prop("checked");
		}
		function infamousChanged(reload) {
			if (reload)
				reloadRecord();
			else
				window.location.href = "/records?infamous=" + isInfamousChecked();
		}
		function reloadRecord() {
			var url = "/record?recordId=" + $(isInfamousChecked() ? "#infamousRecord" : "#record").val();
			if (isActiveChecked())
				url += "&active=true";
			window.location.href = url;
		}
		/*]]>*/
	</script>
</head>
<body class="container">
	<header th:include="fragments/header :: title"></header>
	<h3 th:text="${record != null ? record.name : 'Records'}">Records</h3>
	<h5><i>More Records to Come!!!</i></h5>
	<div class="container-fluid">
		<div class="row">
			<div id="recordDiv" class="col-sm-7" style="padding-left: 0">
				<div id="recordControl" class="input-group" th:style="'float: left' + ${infamous ? '; display: none' : ''}">
					<label for="record" class="input-group-addon">Record:</label>
					<select id="record" class="form-control" onchange="reloadRecord()" data-toggle="tooltip" data-placement="top" title="Select Record">
						<option th:unless="${record}" value="">Select Record</option>
						<optgroup th:each="recordCategory : ${recordCategories}" th:label="${recordCategory.name}" label="Matches Played">
							<option th:each="aRecord : ${recordCategory.records}" th:value="${aRecord.id}" value="MatchesPlayed" th:text="${aRecord.name}" th:selected="${record != null and aRecord.id == record.id}">Most Matches Played</option>
						</optgroup>
					</select>
				</div>
				<div id="infamousRecordControl" class="input-group" th:style="'float: left' + ${infamous ? '' : '; display: none'}">
					<label for="infamousRecord" class="input-group-addon">Infamous:</label>
					<select id="infamousRecord" class="form-control" onchange="reloadRecord()" data-toggle="tooltip" data-placement="top" title="Select Infamous Record">
						<option th:unless="${record}" value="">Select Infamous Record</option>
						<optgroup th:each="recordCategory : ${infamousRecordCategories}" th:label="${recordCategory.name}" label="Matches Played">
							<option th:each="aRecord : ${recordCategory.records}" th:value="${aRecord.id}" value="MatchesLost" th:text="${aRecord.name}" th:selected="${record != null and aRecord.id == record.id}">Most Matches Lost</option>
						</optgroup>
					</select>
				</div>
			</div>
			<div id="infamousDiv" class="col-sm-1">
				<div class="checkbox">
					<label data-toggle="tooltip" data-placement="top" title="Show famous or infamous records">
						<input id="infamous" type="checkbox" th:onchange="'infamousChanged(' + ${record != null} + ')'" th:checked="${infamous}"/> Infamous
					</label>
				</div>
			</div>
			<div th:if="${record}" id="activeDiv" class="col-sm-2">
				<div class="checkbox">
					<label data-toggle="tooltip" data-placement="top" title="Show only active players">
						<input id="active" type="checkbox" onchange="reloadRecord()" th:checked="${active}"/> Active players
					</label>
				</div>
			</div>
		</div>
	</div>
	<table th:if="${record}" id="recordTable" class="table table-condensed table-hover table-striped">
		<thead>
		<tr>
			<th data-column-id="rank" data-type="numeric" data-sortable="false" data-width="55">Rank</th>
			<th data-column-id="country" data-formatter="country" data-sortable="false" data-width="70">Country</th>
			<th data-column-id="name" data-formatter="player" data-sortable="false" data-width="200">Name</th>
			<th th:each="column : ${record.getColumnInfos()}" th:attr="data-column-id=${column.name},data-type=${column.type},data-formatter=${column.formatter},data-width=${column.width},data-align=${column.align},data-header-align=${column.align}" data-sortable="false" th:text="${column.caption}">Value</th>
		</tr>
		</thead>
	</table>
	<footer th:include="fragments/footer :: copy"></footer>
</body>
</html>