<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--@thymesVar id="player" type="org.strangeforest.tcb.stats.model.Player"-->
<!--@thymesVar id="season" type="java.lang.Integer"-->
<!--@thymesVar id="level" type="java.lang.String"-->
<!--@thymesVar id="surface" type="java.lang.String"-->
<!--@thymesVar id="opponentId" type="java.lang.Integer"-->
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title th:text="'Ultimate Tennis Statistics - ' + (${player} ? ${player.name} : 'Player Profile')">Ultimate Tennis Statistics - Player Profile</title>
	<link th:href="@{/webjars/bootstrap/3.3.6/css/bootstrap.min.css}" rel="stylesheet" media="screen"/>
	<link th:href="@{/webjars/jquery-ui-themes/1.11.4/smoothness/jquery-ui.css}" rel="stylesheet" media="screen"/>
	<link th:href="@{/webjars/jquery.bootgrid/1.2.0/dist/jquery.bootgrid.min.css}" rel="stylesheet" media="screen"/>
	<link th:href="@{/css/tennis-stats.css}" rel="stylesheet" media="screen"/>
	<script th:src="@{/webjars/jquery/2.1.4/jquery.min.js}"></script>
	<script th:src="@{/webjars/jquery-ui/1.11.4/jquery-ui.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/3.3.6/js/bootstrap.min.js}"></script>
	<script th:src="@{/webjars/jquery.bootgrid/1.2.0/dist/jquery.bootgrid.min.js}"></script>
	<script th:src="@{/js/tennis-stats.js}"></script>
	<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/
		$(function() {
			$("#player").autocomplete({
				source: "/autocompletePlayer",
				minLength: 2,
				select: function(event, ui) {
					if (ui.item)
						window.location = "/playerProfile?playerId=" + ui.item.id;
				}
			}).focus();
			$("[data-toggle=pill]").click(function(event) {
				event.preventDefault();
				var $pill = $(this);
				if ($pill.hasClass("loaded"))
					return;
				var url = $pill.attr("data-url");
				if (typeof url !== "undefined")
					loadTab($pill, this.hash, url);
				else
					$pill.tab("show");
			});
			if ([[${opponentId != null}]])
				playerRivalryMatches([[${opponentId}]], [[${level}]], [[${surface}]]);
			else
				playerTournaments([[${season}]]);
		});
		function playerTournaments(season, level, result) {
			var $pill = $("#tournamentsPill");
			var url = $pill.attr("data-url");
			if (season)
				url += "&season=" + season;
			if (level)
				url += "&level=" + level;
			if (result)
				url += "&result=" + result;
			loadTab($pill, $("#tournaments"), url)
		}
		function playerTitles(level) {
			playerTournaments(null, level, "W");
		}
		function playerTournamentMatches(tournamentEventId) {
			var $pill = $("#matchesPill");
			var url = $pill.attr("data-url") + "&tournamentEventId=" + tournamentEventId;
			loadTab($pill, $("#matches"), url)
		}
		function playerRivalryMatches(opponentId, level, surface) {
			var $pill = $("#matchesPill");
			var url = $pill.attr("data-url") + "&opponentId=" + opponentId;
			if (level)
				url += "&level=" + level;
			if (surface)
				url += "&surface=" + surface;
			loadTab($pill, $("#matches"), url)
		}
		function loadTab(pill, pane, url) {
			$(pane).load(url, function () {
				if (!pill.hasClass("loaded"))
					pill.addClass("loaded");
				pill.tab("show");
			});
		}
		function toggleStatsData(selector) {
			$(selector).find(".pct-data, .raw-data").toggle();
		}
		/*]]>*/
	</script>
</head>
<body class="container">
	<div th:include="fragments/header :: title"></div>
	<th:block th:if="${player}">
		<h3 th:text="${player.name}">Player Profile</h3>
		<div class="row">
			<div class="col-md-3">
				<table class="table table-condensed text-nowrap">
					<!--/* General */-->
					<tr th:if="${player.dob}">
						<th>Age</th>
						<td th:text="|${player.age} (${#dates.format(player.dob, 'dd-MM-yyyy')})|">25 (1-1-1990)</td>
					</tr>
					<tr>
						<th>Country</th>
						<td><img th:src="@{/images/flags/{code}.png(code=${player.countryCode})}" src="/images/flags/us.png" th:title="${player.countryId}" title="USA" width="24" height="20"/> <span th:text="${player.countryName}">United States</span></td>
					</tr>
					<tr th:if="${player.birthplace}">
						<th>Birthplace</th>
						<td th:text="${player.birthplace}">New York</td>
					</tr>
					<tr th:if="${player.residence}">
						<th>Residence</th>
						<td th:text="${player.residence}">New York</td>
					</tr>
					<tr th:if="${player.height > 0}">
						<th>Height</th>
						<td th:text="|${player.height} cm|">180 cm</td>
					</tr>
					<tr th:if="${player.weight > 0}">
						<th>Weight</th>
						<td th:text="|${player.weight} kg|">80 kg</td>
					</tr>
					<tr th:if="${player.hand}">
						<th>Plays</th>
						<td th:text="${player.handName}">Right-handed</td>
					</tr>
					<tr th:if="${player.backhand}">
						<th>Backhand</th>
						<td th:text="${player.backhandName}">Two-handed</td>
					</tr>
				</table>
			</div>
			<div class="col-md-1">&nbsp;</div>
			<div class="col-md-3">
				<table class="table table-condensed text-nowrap">
					<!--/* Titles */-->
					<tr th:if="${player.titles > 0}">
						<th>Titles</th>
						<td width="100%"><a class="label label-default" th:text="${player.titles}" href="javascript:playerTitles()" title="Show titles">10</a></td>
					</tr>
					<tr th:if="${player.grandSlams > 0}">
						<th>Grand Slams</th>
						<td><a class="label label-danger" th:text="${player.grandSlams}" href="javascript:playerTitles('G')" title="Show Grand Slam titles">1</a></td>
					</tr>
					<tr th:if="${player.tourFinals > 0}">
						<th>Tour Finals</th>
						<td><a class="label label-warning" th:text="${player.tourFinals}" href="javascript:playerTitles('F')" title="Show Tour Finals titles">1</a></td>
					</tr>
					<tr th:if="${player.masters > 0}">
						<th>Masters</th>
						<td><a class="label label-info" th:text="${player.masters}" href="javascript:playerTitles('M')" title="Show Masters titles">5</a></td>
					</tr>
					<tr th:if="${player.olympics > 0}">
						<th>Olympics</th>
						<td><a class="label label-success" th:text="${player.olympics}" href="javascript:playerTitles('O')" title="Show Olympics titles">1</a></td>
					</tr>
					<!--/* Ranking */-->
					<tr th:if="${player.currentRank > 0}">
						<th>Current Rank</th>
						<td th:text="${player.currentRank} + ' (' + ${player.currentRankPoints} + ')'">10 (3000)</td>
					</tr>
					<tr th:if="${player.bestRank > 0}">
						<th>Best Rank</th>
						<td th:text="${player.bestRank} + ' (' + ${#dates.format(player.bestRankDate, 'dd-MM-yyyy')} + ')'">5 (1.1.2010)</td>
					</tr>
					<tr th:if="${player.bestRankPoints > 0}">
						<th>Best Rank Points</th>
						<td th:text="${player.bestRankPoints} + ' (' + ${#dates.format(player.bestRankPointsDate, 'dd-MM-yyyy')} + ')'">5000 (1.1.2011)</td>
					</tr>
				</table>
			</div>
			<div class="col-md-1">&nbsp;</div>
			<div class="col-md-4">
				<table class="table table-condensed text-nowrap">
					<!--/* Ranking */-->
					<tr th:if="${player.goatRankPoints > 0}">
						<th>GOAT Rank</th>
						<td th:text="${player.goatRank} + ' (' + ${player.goatRankPoints} + ')'">50 (2500)</td>
					</tr>
					<tr th:if="${player.weeksAtNo1 > 0}">
						<th>Weeks at No. 1</th>
						<td th:text="${player.weeksAtNo1}">50</td>
					</tr>
					<tr th:if="${player.goatRankPoints > 0 or player.weeksAtNo1 > 0}"><td colspan="2">&nbsp;</td></tr>
					<!--/* Tennis */-->
					<tr th:if="${player.turnedPro > 0}">
						<th>Turned Pro</th>
						<td th:text="${player.turnedPro}">2005</td>
					</tr>
					<tr th:if="${player.coach}">
						<th>Coach</th>
						<td th:text="${player.coach}">Brad Gilbert</td>
					</tr>
 					<!--/* Social */-->
					<tr th:if="${player.webSite}">
						<th>Web Site</th>
						<td><a th:href="'http://' + ${player.webSite}" href="http://www.johnsmith.com" target="_blank" th:text="${player.webSite}">www.johnsmith.com</a></td>
					</tr>
					<tr th:if="${player.twitter}">
						<th>Twitter</th>
						<td><a th:href="'https://twitter.com/' + ${player.twitter}" href="https://twitter.com/JohnSmith" target="_blank" th:text="'@'+ ${player.twitter}">@JohnSmith</a></td>
					</tr>
					<tr th:if="${player.facebook}">
						<th>Facebook</th>
						<td><a th:href="'https://www.facebook.com/' + ${player.facebook}" href="https://www.facebook.com/JohnSmith" target="_blank" th:text="${player.facebook}">JohnSmith</a></td>
					</tr>
				</table>
			</div>
		</div>
		<ul id="playerPills" class="nav nav-pills">
			<li><a id="tournamentsPill" data-toggle="pill" href="#tournaments" data-url="/playerTournaments?playerId=" th:attrappend="data-url=${player.id}">Tournaments</a></li>
			<li><a id="matchesPill" data-toggle="pill" href="#matches" data-url="/playerMatches?playerId=" th:attrappend="data-url=${player.id}">Matches</a></li>
			<li><a data-toggle="pill" href="#timeline" data-url="/playerTimeline?playerId=" th:attrappend="data-url=${player.id}">Timeline</a></li>
			<li><a data-toggle="pill" href="#rivalries" data-url="/playerRivalries?playerId=" th:attrappend="data-url=${player.id}">Rivalries</a></li>
			<li><a data-toggle="pill" href="#ranking" data-url="/playerRankingChart?playerId=" th:attrappend="data-url=${player.id}">Ranking</a></li>
			<li><a data-toggle="pill" href="#performance" data-url="/playerPerformance?playerId=" th:attrappend="data-url=${player.id}">Performance</a></li>
			<li><a data-toggle="pill" href="#statistics" data-url="/playerStatsTab?playerId=" th:attrappend="data-url=${player.id}">Statistics</a></li>
		</ul>
		<div class="tab-content">
			<div id="tournaments" class="tab-pane fade"><br/>Loading...</div>
			<div id="matches" class="tab-pane fade"><br/>Loading...</div>
			<div id="timeline" class="tab-pane fade"><br/>Loading...</div>
			<div id="rivalries" class="tab-pane fade"><br/>Loading...</div>
			<div id="ranking" class="tab-pane fade"><br/>Loading...</div>
			<div id="performance" class="tab-pane fade"><br/>Loading...</div>
			<div id="statistics" class="tab-pane fade"><br/>Loading...</div>
		</div>
	</th:block>
	<div th:include="fragments/footer :: copy"></div>
</body>
</html>