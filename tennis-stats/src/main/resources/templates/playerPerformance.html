<th:block  xmlns:th="http://www.thymeleaf.org">
<!--/*@thymesVar id="seasons" type="java.util.List<java.lang.Integer>"*/-->
<!--/*@thymesVar id="season" type="java.lang.Integer"*/-->
<!--/*@thymesVar id="perf" type="org.strangeforest.tcb.stats.model.PlayerPerformance"*/-->
<script type="text/javascript">
	$(function() {
		$("#playerPerformance").find(".raw-data").hide();
	});
	function reloadPerformance() {
		var url = "/playerPerformance?playerId=[[${playerId}]]";
		var season = $("#perfSeason").val();
		if (season != "")
			url += "&season=" + season;
		$("#performance").load(url);
	}
</script>
<style th:scoped="scoped">
	.progress-perf {
		width: 200px;
		background-color: #dddddd;
		margin-bottom: 0;
	}
	.progress-bar-perf {
		background-color: cornflowerblue;
		font-size: 14px;
	}
</style>
<br/>
<div class="row">
	<div class="col-md-3">
		<div class="input-group">
			<label for="perfSeason" class="input-group-addon">Season:</label>
			<select id="perfSeason" class="form-control" onchange="reloadPerformance()">
				<option value="">All seasons</option>
				<option th:each="aSeason : ${seasons}" th:value="${aSeason}" value="2005" th:text="${aSeason}" th:selected="${aSeason == season}">2005</option>
			</select>
		</div>
	</div>
</div>
<br/>
<div id="playerPerformance">
	<div th:unless="${perf.empty}" class="row text-nowrap">
		<div class="col-md-4">
			<table class="table table-condensed table-hover table-striped">
				<tr>
					<th>Performance</th>
					<td class="pct-data"></td>
					<td class="raw-data">W - L / Played</td>
				</tr>
				<!-- Performance Pct Data -->
				<tr class="pct-data">
					<td>Overall</td>
					<th th:with="wl=${perf.matches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Grand Slam</td>
					<th th:with="wl=${perf.grandSlamMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Tour Finals</td>
					<th th:with="wl=${perf.tourFinalsMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Masters</td>
					<th th:with="wl=${perf.mastersMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Olympics</td>
					<th th:with="wl=${perf.olympicsMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Hard</td>
					<th th:with="wl=${perf.hardMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Clay</td>
					<th th:with="wl=${perf.clayMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Grass</td>
					<th th:with="wl=${perf.grassMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Carpet</td>
					<th th:with="wl=${perf.carpetMatches}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<!-- Performance Raw Data -->
				<tr class="raw-data"></tr>
				<tr class="raw-data">
					<td>Overall</td>
					<th th:text="${perf.matches.WLT}">345 - 55 / 456</th>
				</tr>
				<tr class="raw-data">
					<td>Grand Slam</td>
					<th th:text="${perf.grandSlamMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Tour Finals</td>
					<th th:text="${perf.tourFinalsMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Masters</td>
					<th th:text="${perf.mastersMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Olympics</td>
					<th th:text="${perf.olympicsMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Hard</td>
					<th th:text="${perf.hardMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Clay</td>
					<th th:text="${perf.clayMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Grass</td>
					<th th:text="${perf.grassMatches.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Carpet</td>
					<th th:text="${perf.carpetMatches.WLT}">123 - 55 / 178</th>
				</tr>
			</table>
		</div>
		<div class="col-md-4">
			<table class="table table-condensed table-hover table-striped">
				<tr>
					<th>Pressure Situations</th>
					<td class="pct-data"></td>
					<td class="raw-data">W - L / Played</td>
				</tr>
				<!-- Pressure Situations Pct Data -->
				<tr class="pct-data">
					<td>Deciding Set</td>
					<th th:with="wl=${perf.decidingSets}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Fifth Set</td>
					<th th:with="wl=${perf.fifthSets}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Finals</td>
					<th th:with="wl=${perf.finals}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Vs No. 1</td>
					<th th:with="wl=${perf.vsNo1}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Vs Top 5</td>
					<th th:with="wl=${perf.vsTop5}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Vs Top 10</td>
					<th th:with="wl=${perf.vsTop10}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>After Winning 1st Set</td>
					<th th:with="wl=${perf.afterWinningFirstSet}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>After Losing 1st Set</td>
					<th th:with="wl=${perf.afterLosingFirstSet}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<tr class="pct-data">
					<td>Tie Breaks</td>
					<th th:with="wl=${perf.tieBreaks}">
						<div th:unless="${wl.empty}" class="progress progress-perf">
							<div class="progress-bar progress-bar-perf" role="progressbar" th:style="'width: ' + ${wl.wonPctStr}" th:text="${wl.wonPctStr}" th:attr="aria-valuenow=${wl.wonPct}" aria-valuemin="0" aria-valuemax="100">73%</div>
						</div>
					</th>
				</tr>
				<!-- Pressure Situations Raw Data -->
				<tr class="raw-data"></tr>
				<tr class="raw-data">
					<td>Deciding Set</td>
					<th th:text="${perf.decidingSets.WLT}">95 - 55 / 156</th>
				</tr>
				<tr class="raw-data">
					<td>Fifth Set</td>
					<th th:text="${perf.fifthSets.WLT}">23 - 55 / 44</th>
				</tr>
				<tr class="raw-data">
					<td>Finals</td>
					<th th:text="${perf.finals.WLT}">23 - 55 / 48</th>
				</tr>
				<tr class="raw-data">
					<td>Vs No. 1</td>
					<th th:text="${perf.vsNo1.WLT}">7 - 21 / 28</th>
				</tr>
				<tr class="raw-data">
					<td>Vs Top 5</td>
					<th th:text="${perf.vsTop5.WLT}">57 - 45 / 88</th>
				</tr>
				<tr class="raw-data">
					<td>Vs Top 10</td>
					<th th:text="${perf.vsTop10.WLT}">67 - 55 / 128</th>
				</tr>
				<tr class="raw-data">
					<td>After Winning 1st Set</td>
					<th th:text="${perf.afterWinningFirstSet.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>After Losing 1st Set</td>
					<th th:text="${perf.afterLosingFirstSet.WLT}">123 - 55 / 178</th>
				</tr>
				<tr class="raw-data">
					<td>Tie Breaks</td>
					<th th:text="${perf.tieBreaks.WLT}">123 - 55 / 178</th>
				</tr>
			</table>
		</div>
	</div>
	<div th:unless="${perf.empty}" class="row">
		<div class="pct-data col-md-3">
			<button class="btn btn-default btn-xs glyphicon glyphicon-equalizer" onclick="toggleStatsData('#playerPerformance')" title="Show raw data"> Raw Data</button>
		</div>
		<div class="raw-data col-md-3">
			<button class="btn btn-default btn-xs glyphicon glyphicon-scale" onclick="toggleStatsData('#playerPerformance')" title="Show percentage data"> Pct. Data</button>
		</div>
	</div>
	<th:block th:if="${perf.empty}"><p>No performance data available</p></th:block>
</div>
</th:block>